\documentclass[a4paper, 10pt, final, garamond]{book}
\usepackage{cours-preambule}

\begin{document}

\toggletrue{student}
\HideSolutionstrue
\toggletrue{corrige}

Test QR~:

\resetQ
\QR<[start=3]>{Q1}{A1}


\QR[16]{
	Q2
}{%
	This has no empty line in either the question or answer.
	\smallbreak
	It works well.
}

\QR[18]{
	Q3
}{%
	This \textbf{has} an empty line.
	You'd think it works.
	But error:
	It only shows the last part of answer, skipping anything before, and messes
	up the enumerate etc, even without the !
}

Test blocQR~:

\begin{blocQR}
	\item
	\QR{
		Qa
	}{
		Aa
	}
	\QR{
		Qb
	}{
		Ab
	}
\end{blocQR}

\begin{blocQR}
	\item
	\QR{%
		Qa
	}{%
		Aa
	}
	\QR{%
		Qb
	}{%
		Ab
	}
\end{blocQR}


\QR{
	Q5
}{
	A5
}

\begin{blocQR}[start=56]
	\item
	\QR{%
		Qa
	}{%
		Aa
	}
\end{blocQR}

\begin{center}
	\def\rhgt{0.50}
	\centering
	\begin{tabularx}{\linewidth}{|l|c||YdYdY||Y|}
		\hline
		\multicolumn{2}{|c||}{
			$\xmathstrut{\rhgt}$
		\textbf{Ã‰quation}}        &
		$2\ce{BaO_2\sol{}}$       & $\rightleftharpoons$ &
		$2\ce{BaO\sol{}}$         & $+$                  &
		$\ce{O_2\gaz{}}$          &
		$n_{\tot, gaz}$                                    \\
		\hline
		$\xmathstrut{\rhgt}$
		Initial (\si{mol})        & $\xi = 0$            &
		$\num{0.20}$              & \vline               &
		$\num{0.00}$              & \vline               &
		$\num{0.00}$              &
		$\num{0.00}$                                       \\
		\hline
		$\xmathstrut{\rhgt}$
		Interm. (\si{mol})        & $\xi$                &
		$\csw{\num{0.10} - 2\xi}$ & \vline               &
		$\csw{2\xi}$              & \vline               &
		$\csw{\xi}$               &
		$\csw{\xi}$                                        \\
		\hline
	\end{tabularx}
\end{center}

\end{document}
